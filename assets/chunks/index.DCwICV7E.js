import{i as k,p as O}from"./index.C7-Tf2T7.js";function B(t,r,e){if(t!==null)for(var n,a,o,f,S,c,M,v=0,u=0,d,E=t.type,W=E==="FeatureCollection",R=E==="Feature",T=W?t.features.length:1,l=0;l<T;l++){M=W?t.features[l].geometry:R?t.geometry:t,d=M?M.type==="GeometryCollection":!1,S=d?M.geometries.length:1;for(var w=0;w<S;w++){var s=0,h=0;if(f=d?M.geometries[w]:M,f!==null){c=f.coordinates;var p=f.type;switch(v=0,p){case null:break;case"Point":if(r(c,u,l,s,h)===!1)return!1;u++,s++;break;case"LineString":case"MultiPoint":for(n=0;n<c.length;n++){if(r(c[n],u,l,s,h)===!1)return!1;u++,p==="MultiPoint"&&s++}p==="LineString"&&s++;break;case"Polygon":case"MultiLineString":for(n=0;n<c.length;n++){for(a=0;a<c[n].length-v;a++){if(r(c[n][a],u,l,s,h)===!1)return!1;u++}p==="MultiLineString"&&s++,p==="Polygon"&&h++}p==="Polygon"&&s++;break;case"MultiPolygon":for(n=0;n<c.length;n++){for(h=0,a=0;a<c[n].length;a++){for(o=0;o<c[n][a].length-v;o++){if(r(c[n][a][o],u,l,s,h)===!1)return!1;u++}h++}s++}break;case"GeometryCollection":for(n=0;n<f.geometries.length;n++)if(B(f.geometries[n],r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function J(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return _(t);case"FeatureCollection":return U(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return C(t);default:throw new Error("unknown GeoJSON type")}}function _(t){const r={type:"Feature"};return Object.keys(t).forEach(e=>{switch(e){case"type":case"properties":case"geometry":return;default:r[e]=t[e]}}),r.properties=X(t.properties),t.geometry==null?r.geometry=null:r.geometry=C(t.geometry),r}function X(t){const r={};return t&&Object.keys(t).forEach(e=>{const n=t[e];typeof n=="object"?n===null?r[e]=null:Array.isArray(n)?r[e]=n.map(a=>a):r[e]=X(n):r[e]=n}),r}function U(t){const r={type:"FeatureCollection"};return Object.keys(t).forEach(e=>{switch(e){case"type":case"features":return;default:r[e]=t[e]}}),r.features=t.features.map(e=>_(e)),r}function C(t){const r={type:t.type};return t.bbox&&(r.bbox=t.bbox),t.type==="GeometryCollection"?(r.geometries=t.geometries.map(e=>C(e)),r):(r.coordinates=z(t.coordinates),r)}function z(t){const r=t;return typeof r[0]!="object"?r.slice():r.map(e=>z(e))}function H(t,r={}){return F(t,"mercator",r)}function K(t,r={}){return F(t,"wgs84",r)}function F(t,r,e={}){e=e||{};var n=e.mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&k(t[0])?t=r==="mercator"?g(t):q(t):(n!==!0&&(t=J(t)),B(t,function(a){var o=r==="mercator"?g(a):q(a);a[0]=o[0],a[1]=o[1]})),t}function g(t){var r=Math.PI/180,e=6378137,n=20037508342789244e-9,a=Math.abs(t[0])<=180?t[0]:t[0]-Q(t[0])*360,o=[e*a*r,e*Math.log(Math.tan(Math.PI*.25+.5*t[1]*r))];return o[0]>n&&(o[0]=n),o[0]<-20037508342789244e-9&&(o[0]=-20037508342789244e-9),o[1]>n&&(o[1]=n),o[1]<-20037508342789244e-9&&(o[1]=-20037508342789244e-9),o}function q(t){var r=180/Math.PI,e=6378137;return[t[0]*r/e,(Math.PI*.5-2*Math.atan(Math.exp(-t[1]/e)))*r]}function Q(t){return t<0?-1:t>0?1:0}const i=Math.PI,A=6378245,L=.006693421622965943,P=i*3e3/180;function N([t,r]){return t<72.004||t>137.8347?!0:r<.8293||r>55.8271}function D([t,r]){let e=V(t-105,r-35),n=Y(t-105,r-35);const a=r/180*i;let o=Math.sin(a);o=1-L*o*o;const f=Math.sqrt(o);return e=e*180/(A*(1-L)/(o*f)*i),n=n*180/(A/f*Math.cos(a)*i),[n,e]}function V(t,r){let e=-100+2*t+3*r+.2*r*r+.1*t*r+.2*Math.sqrt(Math.abs(t));return e+=(20*Math.sin(6*t*i)+20*Math.sin(2*t*i))*2/3,e+=(20*Math.sin(r*i)+40*Math.sin(r/3*i))*2/3,e+=(160*Math.sin(r/12*i)+320*Math.sin(r*i/30))*2/3,e}function Y(t,r){let e=300+t+2*r+.1*t*t+.1*t*r+.1*Math.sqrt(Math.abs(t));return e+=(20*Math.sin(6*t*i)+20*Math.sin(2*t*i))*2/3,e+=(20*Math.sin(t*i)+40*Math.sin(t/3*i))*2/3,e+=(150*Math.sin(t/12*i)+300*Math.sin(t/30*i))*2/3,e}const G={toWgs84:t=>{const r=K(O(t)).geometry.coordinates;return[r[0],r[1]]},toGcj02:t=>b.toGcj02(G.toWgs84(t)),toBd09:t=>y.toBd09(G.toGcj02(t))},b={toMerc:t=>H(O(t)).geometry.coordinates,toGcj02:([t,r])=>{if(!N([t,r])){const[e,n]=D([t,r]);t+=e,r+=n}return[t,r]},toBd09:t=>y.toBd09(b.toGcj02(t))},y={toWgs84:([t,r])=>{if(!N([t,r])){const[e,n]=D([t,r]);t-=e,r-=n}return[t,r]},toBd09:([t,r])=>{let e=t,n=r;const a=Math.sqrt(e*e+n*n)+2e-5*Math.sin(n*P),o=Math.atan2(n,e)+3e-6*Math.cos(e*P);return e=a*Math.cos(o)+.0065,n=a*Math.sin(o)+.006,[e,n]},toMerc:t=>b.toMerc(y.toWgs84(t))},m={toWgs84:t=>y.toWgs84(m.toGcj02(t)),toGcj02:([t,r])=>{let e=t-.0065,n=r-.006;const a=Math.sqrt(e*e+n*n)-2e-5*Math.sin(n*P),o=Math.atan2(n,e)-3e-6*Math.cos(e*P);return e=a*Math.cos(o),n=a*Math.sin(o),[e,n]},toMerc:t=>b.toMerc(m.toWgs84(t))},$=Object.freeze(Object.defineProperty({__proto__:null,bd09:m,gcj02:y,merc:G,wgs84:b},Symbol.toStringTag,{value:"Module"}));export{$ as t,b as w};
